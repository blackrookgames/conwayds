@var appdir ../../../app
@var hdrdir ${appdir}/hdr
@var srcdir ${appdir}/src

@var cpp_name DataBitmap
@var cpp_caps DATABITMAP
@var cpp_hdrpath ${hdrdir}/${cpp_name}.h
@var cpp_srcpath ${srcdir}/${cpp_name}.cpp

@load imgimage image ./bitmap.bmp

@dspalette palette image
@databuffer db_palette palette

@load databuffer db_bitmap ./temp.bin

@print Creating ${cpp_hdrpath}
@open ${cpp_hdrpath}
@line \#ifndef ${cpp_caps}_H
@line \#define ${cpp_caps}_H
@line 
@line \#include <nds.h>
@line 
@line class ${cpp_name}
@line {
@line     public:
@line 
@line     static const size_t palette_size;
@line     static const u8 palette_data[];
@line     static const size_t bitmap_size;
@line     static const u8 bitmap_data[];
@line };
@line 
@line \#endif
@close

@print Creating ${cpp_srcpath}
@open ${cpp_srcpath}
@line \#include "${cpp_name}.h"
@line 
@line const size_t ${cpp_name}::palette_size = $(cppsize db_palette);
@line const u8 ${cpp_name}::palette_data[] = 
@line $(cppdata db_palette);
@line 
@line const size_t ${cpp_name}::bitmap_size = $(cppsize db_bitmap);
@line const u8 ${cpp_name}::bitmap_data[] = 
@line $(cppdata db_bitmap);
@close