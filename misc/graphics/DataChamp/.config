@var appdir ../../../app
@var hdrdir ${appdir}/hdr
@var srcdir ${appdir}/src

@var cpp_name DataChamp
@var cpp_caps DATACHAMP
@var cpp_hdrpath ${hdrdir}/${cpp_name}.h
@var cpp_srcpath ${srcdir}/${cpp_name}.cpp

@load imgimage image ./tileset.bmp

@dspalette palette image
@databuffer db_palette palette

@dstileset tileset image 8
@databuffer db_tileset tileset

@load databuffer db_tilemap ./tilemap.bin

@print Creating ${cpp_hdrpath}
@open ${cpp_hdrpath}
@line \#ifndef ${cpp_caps}_H
@line \#define ${cpp_caps}_H
@line 
@line \#include <nds.h>
@line 
@line class ${cpp_name}
@line {
@line     public:
@line 
@line     static const size_t palette_size;
@line     static const u8 palette_data[];
@line     static const size_t tileset_size;
@line     static const u8 tileset_data[];
@line     static const size_t tilemap_size;
@line     static const u8 tilemap_data[];
@line };
@line 
@line \#endif
@close

@print Creating ${cpp_srcpath}
@open ${cpp_srcpath}
@line \#include "${cpp_name}.h"
@line 
@line const size_t ${cpp_name}::palette_size = $(cppsize db_palette);
@line const u8 ${cpp_name}::palette_data[] = 
@line $(cppdata db_palette);
@line 
@line const size_t ${cpp_name}::tileset_size = $(cppsize db_tileset);
@line const u8 ${cpp_name}::tileset_data[] = 
@line $(cppdata db_tileset);
@line 
@line const size_t ${cpp_name}::tilemap_size = $(cppsize db_tilemap);
@line const u8 ${cpp_name}::tilemap_data[] = 
@line $(cppdata db_tilemap);
@close