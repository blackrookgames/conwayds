@var appdir ../car
@var hdrdir ${appdir}/hdr
@var srcdir ${appdir}/src

@var cpp_name Palette
@var cpp_caps PALETTE
@var cpp_hdrpath ${hdrdir}/${cpp_name}.h
@var cpp_srcpath ${srcdir}/${cpp_name}.cpp

@load imgimage img_palette ./car.00.bmp
@dspalette ds_palette img_palette
@databuffer db_palette ds_palette

@open ${cpp_hdrpath}
@line \#ifndef ${cpp_caps}_H
@line \#define ${cpp_caps}_H
@line 
@line \#include <nds.h>
@line 
@line class ${cpp_name}
@line {
@line     public:
@line 
@line     static const size_t palette_size;
@line     static const u8 palette_data[];
@line };
@line 
@line \#endif
@close

@open ${cpp_srcpath}
@line \#include "${cpp_name}.h"
@line 
@line const size_t ${cpp_name}::palette_size = $(len db_palette);
@line const u8 ${cpp_name}::palette_data[] = 
@line $(cppdata db_palette);
@close